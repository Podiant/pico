{"version":3,"sources":["../../../../assets/js/lib/classes/event-emitter.js","../../../../assets/js/lib/classes/app.js","../../../../assets/js/lib/classes/plugin.js","../../../../assets/js/lib/classes/validator.js","../../../../assets/js/lib/validation/email.js","../../../../assets/js/lib/validation/unique.js","../../../../assets/js/lib/validation/pair.js","../../../../assets/js/lib/validation/server.js","../../../../assets/js/plugins/wizard.js","../../../../assets/js/plugins/dropzone.js","../../../../assets/js/lib/classes/debouncer.js","../../../../assets/js/plugins/typeahead.js","../../../../assets/js/main.js"],"names":["EventEmitter","_classCallCheck","this","__callbacks","event","callback","push","cbs","newCallbacks","i","length","args","Array","from","arguments","slice","apply","App","_ref","_this","plugins","_possibleConstructorReturn","_getPrototypeOf","call","__plugins","isArray","forEach","Plugin","plugin","_assertThisInitialized","$","window","document","ready","emit","PluginBase","app","on","ValidatorBase","value","Promise","resolve","reject","validate","then","valid","catch","err","Error","REGEX","EmailValidator","email","str","String","toLowerCase","test","UniqueValidator","basis","_this2","socket","WebSocket","concat","location","host","resolved","rejected","onclose","onmessage","e","data","JSON","parse","close","error","onopen","send","PairlValidator","checkAgainst","ServerValidator","WizardStep","wizard","dom","show","direction","hasClass","addClass","setTimeout","removeClass","hide","find","first","focus","remove","field","group","closest","feedback","appendTo","text","message","prev","next","buttons","inputs","enable","attr","not","removeAttr","waitingValidators","form","each","input","val","required","type","unique","serverSide","pairWith","trim","validateNext","pair","shift","validator","check","self","index","parseInt","keyCode","preventDefault","Wizard","steps","subdom","step","submit","stepIndex","WizardPlugin","Dropzone","mimeType","file","typeEx","RegExp","replace","match","originalEvent","dataTransfer","files","get","trigger","target","click","ImageDropzone","alert","reader","FileReader","onload","css","result","readAsDataURL","DropzonePlugin","Debouncer","func","tolerance","timer","bouncedArgs","unbounced","_len","_key","ListItem","attach","container","thumbnail","thumbContainer","thumbImg","span","label","select","blur","List","position","offset","selectedItem","items","item","listItem","top","outerHeight","left","width","outerWidth","append","detatch","moveUp","Math","max","moveDown","min","Typeahead","urlTemplate","dataTransformer","_this3","name","replacement","after","search","url","encodeURIComponent","getJSON","transformed","list","id","stopPropagation","Mapper","template","dollar","indexOf","substr","right","Counter","obj","Transformer","transform","idTemplate","labelTemplate","thumbnailTemplate","idMapper","labelMapper","thumbnailMapper","counter","count","TypeaheadPlugin","transformer","ta","Pico"],"mappings":"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","sourcesContent":["export default class EventEmitter {\n    constructor() {\n        this.__callbacks = {}\n    }\n\n    on(event, callback) {\n        if (typeof (this.__callbacks[event]) === 'undefined') {\n            this.__callbacks[event] = []\n        }\n\n        this.__callbacks[event].push(callback)\n        return this\n    }\n\n    off(event, callback) {\n        var cbs = this.__callbacks[event]\n\n        if (typeof (cbs) === 'undefined') {\n            return this\n        }\n\n        var newCallbacks = []\n\n        if (typeof (callback) !== 'undefined') {\n            for(var i = 0; i < cbs.length; i ++) {\n                if (cbs[i] !== callback) {\n                    newCallbacks.push(cbs[i])\n                }\n            }\n        }\n\n        this.__callbacks[event] = newCallbacks\n        return this\n    }\n\n    emit(event) {\n        var cbs = this.__callbacks[event]\n        var args = Array.from(arguments).slice(1)\n\n        if (typeof (cbs) !== 'undefined') {\n            for(var i = 0; i < cbs.length; i ++) {\n                cbs[i].apply(this, args)\n            }\n        }\n\n        return this\n    }\n}\n","import EventEmitter from './event-emitter'\n\nexport default class App extends EventEmitter {\n    constructor({plugins}) {\n        super()\n        this.__plugins = []\n\n        if (Array.isArray(plugins)) {\n            plugins.forEach(\n                (Plugin) => {\n                    const plugin = new Plugin(this)\n\n                    this.__plugins.push(plugin)\n                }\n            )\n        }\n\n        this.$ = window.$\n        this.$(document).ready(\n            () => {\n                this.ready()\n            }\n        )\n    }\n\n    ready() {\n        this.emit('ready')\n    }\n}\n","import EventEmitter from './event-emitter'\n\nexport default class PluginBase extends EventEmitter {\n    constructor(app) {\n        super()\n        app.on('ready', this.ready)\n    }\n\n    ready() {\n\n    }\n}\n","/* global Promise */\n\nimport EventEmitter from './event-emitter'\n\nexport default class ValidatorBase extends EventEmitter {\n    check(value) {\n        return new Promise(\n            (resolve, reject) => {\n                this.emit('validating')\n                this.validate(value).then(\n                    (valid) => {\n                        this.emit('valid')\n                        resolve(valid)\n                    }\n                ).catch(\n                    (err) => {\n                        this.emit('invalid', err)\n                        reject(err)\n                    }\n                )\n            }\n        )\n    }\n\n    validate() {\n        throw new Error('Method not implemented')\n    }\n}\n","/* global Promise */\n\nimport ValidatorBase from '../classes/validator'\n\nconst REGEX = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n\nexport default class EmailValidator extends ValidatorBase {\n    validate(email) {\n        return new Promise(\n            (resolve, reject) => {\n                const str = String(email).toLowerCase()\n\n                if (!REGEX.test(str)) {\n                    reject(new Error('This doesn\\'t look like an email address.'))\n                } else {\n                    resolve(str)\n                }\n            }\n        )\n    }\n}\n","/* global Promise */\n\nimport ValidatorBase from '../classes/validator'\n\nexport default class UniqueValidator extends ValidatorBase {\n    constructor(basis) {\n        super()\n        this.basis = basis\n    }\n\n    validate(value) {\n        return new Promise(\n            (resolve, reject) => {\n                const socket = new WebSocket(\n                    `ws://${window.location.host}/ws/unique/${this.basis}/`\n                )\n\n                let resolved = false\n                let rejected = false\n\n                socket.onclose = () => {\n                    if (!rejected && !resolved) {\n                        reject(\n                            new Error('An error occurred while communicating with the server.')\n                        )\n                    }\n                }\n\n                socket.onmessage = (e) => {\n                    const data = JSON.parse(e.data)\n\n                    if (data.valid) {\n                        if (!rejected && !resolved) {\n                            resolved = true\n                            socket.close()\n                            resolve(value)\n                        }\n                    } else if (!rejected && !resolved) {\n                        rejected = true\n                        socket.close()\n                        reject(new Error(data.error))\n                    }\n                }\n\n                socket.onopen = () => {\n                    socket.send(value)\n                }\n            }\n        )\n    }\n}\n","/* global Promise */\n\nimport ValidatorBase from '../classes/validator'\n\nexport default class PairlValidator extends ValidatorBase {\n    constructor(value) {\n        super()\n        this.checkAgainst = value\n    }\n\n    validate(value) {\n        return new Promise(\n            (resolve, reject) => {\n                if (value !== this.checkAgainst) {\n                    reject(new Error('This value doesn\\'t match the previous one.'))\n                } else {\n                    resolve(value)\n                }\n            }\n        )\n    }\n}\n","/* global Promise */\n\nimport ValidatorBase from '../classes/validator'\n\nexport default class ServerValidator extends ValidatorBase {\n    constructor(basis) {\n        super()\n        this.basis = basis\n    }\n\n    validate(value) {\n        return new Promise(\n            (resolve, reject) => {\n                const socket = new WebSocket(\n                    `ws://${window.location.host}/ws/validate/${this.basis}/`\n                )\n\n                let resolved = false\n                let rejected = false\n\n                socket.onclose = () => {\n                    if (!rejected && !resolved) {\n                        reject(\n                            new Error('An error occurred while communicating with the server.')\n                        )\n                    }\n                }\n\n                socket.onmessage = (e) => {\n                    const data = JSON.parse(e.data)\n\n                    if (data.valid) {\n                        if (!rejected && !resolved) {\n                            resolved = true\n                            socket.close()\n                            resolve(value)\n                        }\n                    } else if (!rejected && !resolved) {\n                        rejected = true\n                        socket.close()\n                        reject(new Error(data.error))\n                    }\n                }\n\n                socket.onopen = () => {\n                    socket.send(value)\n                }\n            }\n        )\n    }\n}\n","/* global Promise */\n\nimport EventEmitter from '../lib/classes/event-emitter'\nimport PluginBase from '../lib/classes/plugin'\nimport EmailValidator from '../lib/validation/email'\nimport UniqueValidator from '../lib/validation/unique'\nimport PairlValidator from '../lib/validation/pair'\nimport ServerValidator from '../lib/validation/server'\n\nclass WizardStep extends EventEmitter {\n    constructor(wizard, dom) {\n        super()\n\n        const submit = () => {\n            const buttons = dom.find('button, input[type=\"button\"]').attr('disabled', 'disabled')\n            const inputs = dom.find(':input').not(buttons).not('[disabled]')\n            const enable = () => {\n                buttons.removeAttr('disabled')\n                inputs.removeAttr('disabled')\n            }\n\n            inputs.attr('disabled', 'disabled')\n\n            this.on('moving.next', enable)\n            this.on('validation',\n                (err) => {\n                    if (err) {\n                        enable()\n                    }\n                }\n            )\n        }\n\n        this.show = (direction) => {\n            return new Promise(\n                (resolve) => {\n                    if (dom.hasClass('active')) {\n                        this.emit('shown')\n                        resolve()\n                    }\n\n                    this.emit('showing')\n\n                    if (direction) {\n                        dom.addClass('showing-' + direction)\n                    } else {\n                        dom.addClass('showing')\n                    }\n\n                    setTimeout(\n                        () => {\n                            if (direction) {\n                                dom.removeClass('showing-' + direction)\n                            } else {\n                                dom.removeClass('showing')\n                            }\n\n                            this.emit('shown')\n                            resolve()\n                        },\n                        333\n                    )\n                }\n            )\n        }\n\n        this.hide = (direction) => {\n            return new Promise(\n                (resolve) => {\n                    this.emit('hiding')\n\n                    if (direction) {\n                        dom.addClass('hiding-' + direction)\n                    } else {\n                        dom.addClass('hiding')\n                    }\n\n                    setTimeout(\n                        () => {\n                            if (direction) {\n                                dom.removeClass('hiding-' + direction)\n                            } else {\n                                dom.removeClass('hiding')\n                            }\n\n                            this.emit('hidden')\n                            resolve()\n                        },\n                        333\n                    )\n                }\n            )\n        }\n\n        this.on('showing',\n            () => {\n                dom.addClass('active')\n            }\n        )\n\n        this.on('hidden',\n            () => {\n                dom.removeClass('active')\n            }\n        )\n\n        this.on('shown',\n            () => {\n                dom.find(':input').first().focus()\n            }\n        )\n\n        this.on('validation',\n            (err) => {\n                if (typeof (err) === 'undefined') {\n                    dom.find(':input.is-invalid').removeClass('is-invalid')\n                    dom.find('.invalid-feedback').remove()\n                    return\n                }\n\n                const field = window.$(err.field)\n                const group = field.closest('.form-group')\n                let feedback = group.find('.invalid-feedback')\n\n                field.addClass('is-invalid')\n\n                if (!feedback.length) {\n                    feedback = window.$('<div>').addClass('invalid-feedback')\n                    feedback.appendTo(group)\n                }\n\n                feedback.text(err.message)\n                field.focus()\n            }\n        )\n\n        this.prev = () => {\n            this.hide('rw').then(\n                () => {\n                    this.emit('moving.prev')\n                    this.emit('prev')\n                }\n            )\n        }\n\n        this.next = () => {\n            submit()\n            this.emit('validation')\n\n            this.validate().then(\n                () => {\n                    this.emit('moving.next')\n                    this.hide('ff').then(\n                        () => {\n                            this.emit('next')\n                        }\n                    )\n                }\n            ).catch(\n                (err) => {\n                    this.emit('validation', err)\n                }\n            )\n        }\n\n        this.validate = () => {\n            return new Promise(\n                (resolve, reject) => {\n                    let rejected = false\n                    let waitingValidators = []\n                    const form = dom.closest('form')\n\n                    dom.find(':input').each(\n                        function() {\n                            if (rejected) {\n                                return false\n                            }\n\n                            const input = window.$(this)\n                            const value = input.val()\n                            const required = input.attr('required')\n                            const type = input.attr('type') || 'text'\n                            const unique = input.attr('data-unique')\n                            const serverSide = input.attr('data-validator')\n                            const pairWith = input.attr('data-pair')\n\n                            if (required && !value.trim()) {\n                                rejected = true\n                                reject(\n                                    {\n                                        field: input,\n                                        message: 'This field is required.'\n                                    }\n                                )\n\n                                return false\n                            }\n\n                            switch (type) {\n                                case 'email':\n                                    waitingValidators.push(\n                                        [\n                                            new EmailValidator(),\n                                            input\n                                        ]\n                                    )\n\n                                    break\n                            }\n\n                            if (unique) {\n                                waitingValidators.push(\n                                    [\n                                        new UniqueValidator(unique),\n                                        input\n                                    ]\n                                )\n                            }\n\n                            if (serverSide) {\n                                waitingValidators.push(\n                                    [\n                                        new ServerValidator(serverSide),\n                                        input\n                                    ]\n                                )\n                            }\n\n                            if (pairWith) {\n                                waitingValidators.push(\n                                    [\n                                        new PairlValidator(\n                                            form.find(`:input[name=\"${pairWith}\"]`).val()\n                                        ),\n                                        input\n                                    ]\n                                )\n                            }\n                        }\n                    )\n\n                    const validateNext = () => {\n                        const pair = waitingValidators.shift()\n                        const validator = pair[0]\n                        const input = pair[1]\n                        const value = input.val().trim()\n\n                        validator.check(value).then(\n                            () => {\n                                if (waitingValidators.length) {\n                                    validateNext()\n                                } else if (!rejected) {\n                                    resolve()\n                                }\n                            }\n                        ).catch(\n                            (err) => {\n                                if (!rejected) {\n                                    rejected = true\n\n                                    reject(\n                                        {\n                                            field: input,\n                                            message: err.message\n                                        }\n                                    )\n                                }\n                            }\n                        )\n                    }\n\n                    if (!waitingValidators.length) {\n                        if (!rejected) {\n                            resolve()\n                        }\n                    } else {\n                        validateNext()\n                    }\n                }\n            )\n        }\n\n        const self = this\n\n        dom.on('click', '[data-action=\"prev\"]',\n            function() {\n                self.prev()\n            }\n        )\n\n        dom.on('click', '[data-skip]',\n            function() {\n                const index = parseInt(\n                    window.$(this).data('skip')\n                )\n\n                self.hide('ff')\n                self.emit('skip', index)\n            }\n        )\n\n        dom.on('click', '[data-action=\"next\"]',\n            function() {\n                self.next()\n            }\n        )\n\n        dom.on('keydown', ':input',\n            function(e) {\n                if (e.keyCode === 13) {\n                    e.preventDefault()\n                    self.next()\n                }\n            }\n        )\n    }\n}\n\nclass Wizard extends EventEmitter {\n    constructor(dom) {\n        super()\n\n        const self = this\n        let steps = []\n\n        dom.find('.step').each(\n            function() {\n                const subdom = window.$(this)\n                const step = new WizardStep(self, subdom)\n\n                subdom.data('wizard-step', step)\n                steps.push(step)\n            }\n        )\n\n        steps.forEach(\n            (step, i) => {\n                if (i > 0) {\n                    step.on('moving.prev',\n                        () => {\n                            const prev = steps[i - 1]\n\n                            prev.show('rw')\n                        }\n                    )\n                }\n\n                if (i < steps.length - 1) {\n                    step.on('moving.next',\n                        () => {\n                            const next = steps[i + 1]\n\n                            next.show('ff')\n                        }\n                    )\n                } else {\n                    step.on('next',\n                        () => {\n                            this.submit()\n                        }\n                    )\n                }\n\n                step.on('skip',\n                    (index) => {\n                        steps[index].show('ff')\n                    }\n                )\n            }\n        )\n\n        this.show = (stepIndex) => {\n            if (typeof (stepIndex) === 'undefined') {\n                stepIndex = 0\n            }\n\n            dom.find('.step').each(\n                function(index) {\n                    const subdom = window.$(this)\n                    const isInvalid = subdom.find('.form-group.is-invalid').length\n\n                    if (isInvalid) {\n                        stepIndex = index\n                        return false\n                    }\n                }\n            )\n\n            steps[stepIndex].show()\n        }\n\n        this.submit = () => {\n            const form = dom.closest('form')\n\n            form.submit()\n        }\n    }\n}\n\nexport default class WizardPlugin extends PluginBase {\n    ready() {\n        const $ = this.$\n\n        $('.wizard').each(\n            function() {\n                const wizard = new Wizard($(this))\n\n                wizard.show()\n            }\n        )\n    }\n}\n","import EventEmitter from '../lib/classes/event-emitter'\nimport PluginBase from '../lib/classes/plugin'\n\nclass Dropzone extends EventEmitter {\n    constructor(dom) {\n        super()\n\n        const input = dom.find('input[type=\"file\"]')\n        const mimeType = input.attr('accept')\n        const self = this\n        const check = (file) => {\n            if (mimeType) {\n                const typeEx = new RegExp('^' + mimeType.replace('/', '\\\\/').replace('*', '.*'))\n                const match = file.type.match(typeEx)\n\n                if (!match) {\n                    return false\n                }\n            }\n\n            return true\n        }\n\n        dom.on('dragenter',\n            (e) => {\n                e.preventDefault()\n                dom.addClass('active')\n                this.emit('drag.enter')\n            }\n        ).on('dragleave',\n            (e) => {\n                e.preventDefault()\n                dom.removeClass('active')\n                this.emit('drag.exit')\n            }\n        ).on('dragover',\n            (e) => {\n                e.preventDefault()\n                dom.addClass('active')\n                this.emit('drag.over')\n            }\n        ).on('drop',\n            (e) => {\n                e.preventDefault()\n\n                if (e.originalEvent.dataTransfer.files.length !== 1) {\n                    return\n                }\n\n                let i = 0\n\n                for (i = 0; i < e.originalEvent.dataTransfer.files.length; i ++) {\n                    if (!check(e.originalEvent.dataTransfer.files[i])) {\n                        this.emit(\n                            'error',\n                            new Error('The dragged file was not of the correct type.')\n                        )\n\n                        return\n                    }\n                }\n\n                if (e.originalEvent.dataTransfer.files) {\n                    input.get(0).files = e.originalEvent.dataTransfer.files\n                    input.trigger('change')\n                }\n            }\n        ).on('click',\n            (e) => {\n                if (e.target === input.get(0)) {\n                    return\n                }\n\n                e.preventDefault()\n                input.get(0).click()\n            }\n        )\n\n        input.on('change',\n            function() {\n                let i = 0\n\n                for (i = 0; i < this.files.length; i++) {\n                    self.emit('file', this.files[i])\n                }\n            }\n        )\n    }\n}\n\nclass ImageDropzone extends Dropzone {\n    constructor(dom) {\n        super(dom)\n\n        this.on('error',\n            () => {\n                alert('Only images are supported here.')\n            }\n        )\n\n        this.on('file',\n            (file) => {\n                const reader = new FileReader()\n\n                reader.onload = (e) => {\n                    dom.css(\n                        'background-image',\n                        `url(${e.target.result})`\n                    )\n                }\n\n                reader.readAsDataURL(file)\n            }\n        )\n    }\n}\n\nexport default class DropzonePlugin extends PluginBase {\n    ready() {\n        const $ = this.$\n\n        $('.dropzone').each(\n            function() {\n                const dom = $(this)\n\n                if (dom.hasClass('dropzone-image')) {\n                    new ImageDropzone(dom)\n                } else {\n                    new Dropzone(dom)\n                }\n            }\n        )\n    }\n}\n","const Debouncer = (func, tolerance) => {\n    if (typeof (tolerance) === 'undefined') {\n        tolerance = 333\n    }\n\n    let timer = null\n    let bouncedArgs = []\n    const unbounced = () => {\n        {\n            func.apply(func, bouncedArgs)\n            timer = null\n        }\n    }\n\n    const runner = (...args) => {\n        bouncedArgs = args\n\n        if (timer === null) {\n            timer = setTimeout(unbounced, tolerance)\n        }\n    }\n\n    return runner\n}\n\nexport default Debouncer\n","import EventEmitter from '../lib/classes/event-emitter'\nimport PluginBase from '../lib/classes/plugin'\nimport Debouncer from '../lib/classes/debouncer'\n\nclass ListItem extends EventEmitter {\n    constructor(data) {\n        super()\n\n        this.data = data\n        this.attach = (dom) => {\n            const container = window.$('<a>').addClass(\n                'typeahead-item'\n            ).addClass(\n                'list-group-item'\n            ).attr(\n                'href',\n                'javascript:;'\n            )\n\n            if (data.thumbnail) {\n                const thumbContainer = window.$('<div>').addClass(\n                    'd-flex w-100'\n                )\n\n                const thumbImg = window.$('<img>').attr(\n                    'src', data.thumbnail\n                ).attr(\n                    'height', '30'\n                ).addClass(\n                    'mr-3'\n                )\n\n                const span = window.$('<span>').text(data.label)\n\n                thumbImg.appendTo(thumbContainer)\n                span.appendTo(thumbContainer)\n                thumbContainer.appendTo(container)\n            } else {\n                container.text(data.label)\n            }\n\n            container.on('click',\n                () => {\n                    this.select()\n                }\n            )\n\n            container.appendTo(dom)\n\n            this.focus = () => {\n                container.addClass('active').addClass('list-item-active')\n                this.emit('focused')\n            }\n\n            this.blur = () => {\n                container.removeClass('active').removeClass('list-item-active')\n                this.emit('blurred')\n            }\n\n            this.select = () => {\n                container.addClass('active').addClass('list-item-active')\n                this.emit('selected')\n            }\n        }\n\n        this.focus = () => {\n            throw new Error('List item not attached to container DOM element.')\n        }\n\n        this.blur = () => {\n            throw new Error('List item not attached to container DOM element.')\n        }\n    }\n}\n\nclass List extends EventEmitter {\n    constructor(data) {\n        super()\n\n        this.attach = (dom) => {\n            const container = window.$('<div>').addClass(\n                'typeahead-container'\n            ).addClass(\n                'list-group'\n            )\n\n            const position = dom.offset()\n            let selectedItem = null\n            let items = []\n\n            data.forEach(\n                (item, index) => {\n                    const listItem = new ListItem(item)\n\n                    listItem.index = index\n                    listItem.on('focused',\n                        () => {\n                            if (selectedItem !== listItem) {\n                                if (selectedItem !== null) {\n                                    selectedItem.blur()\n                                }\n\n                                selectedItem = listItem\n                            }\n                        }\n                    )\n\n                    listItem.on('selected',\n                        () => {\n                            this.emit('selected', listItem)\n                        }\n                    )\n\n                    items.push(listItem)\n                    listItem.attach(container)\n                }\n            )\n\n            container.css(\n                {\n                    position: 'absolute',\n                    top: position.top + dom.outerHeight(true),\n                    left: position.left,\n                    width: dom.outerWidth(true)\n                }\n            )\n\n            window.$('body').append(container)\n\n            this.detatch = () => {\n                container.remove()\n            }\n\n            this.moveUp = () => {\n                let index = null\n\n                if (selectedItem !== null) {\n                    index = selectedItem.index\n                }\n\n                if (index === null) {\n                    index = data.length - 1\n                } else {\n                    index = Math.max(0, index - 1)\n                }\n\n                this.focus(index)\n            }\n\n            this.moveDown = () => {\n                let index = null\n\n                if (selectedItem !== null) {\n                    index = selectedItem.index\n                }\n\n                if (index === null) {\n                    index = 0\n                } else {\n                    index = Math.min(data.length - 1, index + 1)\n                }\n\n                this.focus(index)\n            }\n\n            this.focus = (index) => {\n                if (typeof (index) === 'undefined') {\n                    throw new Error('Expected index of item to select.')\n                }\n\n                if (typeof (items[index]) !== 'undefined') {\n                    items[index].focus()\n                } else {\n                    if (selectedItem !== null) {\n                        selectedItem.blur()\n                    }\n\n                    selectedItem = null\n                }\n            }\n\n            this.select = () => {\n                if (selectedItem !== null) {\n                    selectedItem.select()\n                }\n            }\n        }\n\n        this.detatch = () => {\n            throw new Error('List has not been attached to a DOM element.')\n        }\n    }\n}\n\nclass Typeahead extends EventEmitter {\n    constructor(input, urlTemplate, dataTransformer) {\n        super()\n\n        const name = input.attr('name')\n        const replacement = window.$('<input>').attr(\n            'name', name\n        ).attr(\n            'type', 'hidden'\n        )\n\n        input.removeAttr('name')\n        input.after(replacement)\n\n        const search = new Debouncer(\n            (value) => {\n                const url = urlTemplate.replace('%s', encodeURIComponent(value))\n\n                window.$.getJSON(url,\n                    (data) => {\n                        const transformed = dataTransformer(data)\n                        const list = new List(transformed)\n\n                        if (input.data('typeahed-list')) {\n                            input.data('typeahed-list').detatch()\n                        }\n\n                        this.on('move.up',\n                            () => {\n                                list.moveUp()\n                            }\n                        )\n\n                        this.on('move.down',\n                            () => {\n                                list.moveDown()\n                            }\n                        )\n\n                        this.on('select',\n                            () => {\n                                list.select()\n                            }\n                        )\n\n                        list.on('selected',\n                            (item) => {\n                                replacement.val(item.data.id)\n                                input.val(item.data.label)\n                                list.detatch()\n                                input.focus()\n                            }\n                        )\n\n                        list.attach(input)\n                        input.data('typeahed-list', list)\n                    }\n                )\n            },\n            900\n        )\n\n        input.on('input', () => search(input.val()))\n        input.on('keydown',\n            (e) => {\n                switch (e.keyCode) {\n                    case 40:\n                        e.preventDefault()\n                        this.emit('move.down')\n                        break\n\n                    case 38:\n                        e.preventDefault()\n                        this.emit('move.up')\n                        break\n\n                    case 13:\n                        e.preventDefault()\n                        e.stopPropagation()\n                        this.emit('select')\n                        break\n                }\n            }\n        )\n    }\n}\n\nconst Mapper = (template) => {\n    const dollar = template.indexOf('.$.')\n    const left = template.substr(0, dollar)\n    const right = template.substr(dollar + 3)\n\n    return (index, value) => {\n        const array = value[left]\n        const item = array[index]\n\n        if (typeof (item) === 'undefined') {\n            throw new Error('Index out of range.')\n        }\n\n        return item[right]\n    }\n}\n\nconst Counter = (template) => {\n    const dollar = template.indexOf('.$.')\n    const left = template.substr(0, dollar)\n\n    return (value) => {\n        const obj = value[left]\n\n        if (Array.isArray(obj)) {\n            return obj.length\n        }\n\n        throw new Error('Value is not an array.')\n    }\n}\n\nclass Transformer {\n    constructor(template) {\n        this.transform = (data) => {\n            const idTemplate = template.id\n            const labelTemplate = template.label\n            const thumbnailTemplate = template.thumbnail\n            const idMapper = idTemplate ? new Mapper(idTemplate) : null\n            const labelMapper = labelTemplate ? new Mapper(labelTemplate) : null\n            const thumbnailMapper = thumbnailTemplate ? new Mapper(thumbnailTemplate) : null\n            const counter = new Counter(idTemplate)\n            let count = 0\n\n            if (!idMapper) {\n                throw new Error('No template provided for returning an object ID.')\n            }\n\n            if (!labelMapper) {\n                throw new Error('No template provided for returning an object label.')\n            }\n\n            try {\n                count = counter(data)\n            } catch (err) {\n                throw new Error('Invalid data returned.')\n            }\n\n            let i = 0\n            let transformed = []\n            let map = (index) => {\n                let obj = {}\n\n                obj.id = idMapper(index, data)\n                obj.label = labelMapper(index, data)\n\n                if (thumbnailMapper) {\n                    obj.thumbnail = thumbnailMapper(index, data)\n                }\n\n                return obj\n            }\n\n            for(i = 0; i < count; i ++) {\n                transformed.push(map(i))\n            }\n\n            return transformed\n        }\n    }\n}\n\nexport default class TypeaheadPlugin extends PluginBase {\n    ready() {\n        const $ = this.$\n\n        $('input[data-typeahead-url]').each(\n            function() {\n                const input = $(this)\n                const url = input.data('typeahead-url')\n                const transformer = new Transformer(\n                    input.data('typeahead-transform')\n                )\n\n                const ta = new Typeahead(\n                    input,\n                    url,\n                    transformer.transform\n                )\n\n                input.removeAttr('data-typeahead-url')\n                input.removeAttr('data-typeahead-transform')\n\n                input.data('typeahead', ta)\n            }\n        )\n    }\n}\n","import App from './lib/classes/app'\nimport WizardPlugin from './plugins/wizard'\nimport DropzonePlugin from './plugins/dropzone'\nimport TypeaheadPlugin from './plugins/typeahead'\n\nwindow.Pico = new App(\n    {\n        plugins: [\n            WizardPlugin,\n            DropzonePlugin,\n            TypeaheadPlugin\n        ]\n    }\n)\n"]}