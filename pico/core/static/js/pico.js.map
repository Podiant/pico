{"version":3,"sources":["../../../../assets/js/lib/classes/event-emitter.js","../../../../assets/js/lib/classes/app.js","../../../../assets/js/lib/classes/plugin.js","../../../../assets/js/onboarding/wizard.js","../../../../assets/js/main.js"],"names":["EventEmitter","_classCallCheck","this","__callbacks","event","callback","push","cbs","newCallbacks","i","length","args","Array","from","arguments","slice","apply","App","_ref","_this","plugins","_possibleConstructorReturn","_getPrototypeOf","call","__plugins","isArray","forEach","Plugin","plugin","_assertThisInitialized","$","window","document","ready","emit","PluginBase","app","on","WizardStep","wizard","dom","show","direction","Promise","resolve","hasClass","addClass","setTimeout","removeClass","hide","find","first","focus","err","remove","field","group","closest","feedback","appendTo","text","message","prev","then","next","buttons","inputs","enable","attr","not","removeAttr","validate","catch","reject","rejected","each","input","value","val","trim","self","e","keyCode","Wizard","_this2","steps","step","stepIndex","OnboardingWizardPlugin","Pico"],"mappings":"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","sourcesContent":["export default class EventEmitter {\n    constructor() {\n        this.__callbacks = {}\n    }\n\n    on(event, callback) {\n        if (typeof (this.__callbacks[event]) === 'undefined') {\n            this.__callbacks[event] = []\n        }\n\n        this.__callbacks[event].push(callback)\n        return this\n    }\n\n    off(event, callback) {\n        var cbs = this.__callbacks[event]\n\n        if (typeof (cbs) === 'undefined') {\n            return this\n        }\n\n        var newCallbacks = []\n\n        if (typeof (callback) !== 'undefined') {\n            for(var i = 0; i < cbs.length; i ++) {\n                if (cbs[i] !== callback) {\n                    newCallbacks.push(cbs[i])\n                }\n            }\n        }\n\n        this.__callbacks[event] = newCallbacks\n        return this\n    }\n\n    emit(event) {\n        var cbs = this.__callbacks[event]\n        var args = Array.from(arguments).slice(1)\n\n        if (typeof (cbs) !== 'undefined') {\n            for(var i = 0; i < cbs.length; i ++) {\n                cbs[i].apply(this, args)\n            }\n        }\n\n        return this\n    }\n}\n","import EventEmitter from './event-emitter'\n\nexport default class App extends EventEmitter {\n    constructor({plugins}) {\n        super()\n        this.__plugins = []\n\n        if (Array.isArray(plugins)) {\n            plugins.forEach(\n                (Plugin) => {\n                    const plugin = new Plugin(this)\n\n                    this.__plugins.push(plugin)\n                }\n            )\n        }\n\n        this.$ = window.$\n        this.$(document).ready(\n            () => {\n                this.ready()\n            }\n        )\n    }\n\n    ready() {\n        this.emit('ready')\n    }\n}\n","import EventEmitter from './event-emitter'\n\nexport default class PluginBase extends EventEmitter {\n    constructor(app) {\n        super()\n        app.on('ready', this.ready)\n    }\n\n    ready() {\n\n    }\n}\n","/* global Promise */\n\nimport EventEmitter from '../lib/classes/event-emitter'\nimport PluginBase from '../lib/classes/plugin'\n\nclass WizardStep extends EventEmitter {\n    constructor(wizard, dom) {\n        super()\n\n        const submit = () => {\n            const buttons = dom.find('button, input[type=\"button\"]').attr('disabled', 'disabled')\n            const inputs = dom.find(':input').not(buttons).not('[disabled]')\n            const enable = () => {\n                buttons.removeAttr('disabled')\n                inputs.removeAttr('disabled')\n            }\n\n            inputs.attr('disabled', 'disabled')\n\n            this.on('moving.next', enable)\n            this.on('validation',\n                (err) => {\n                    if (err) {\n                        enable()\n                    }\n                }\n            )\n        }\n\n        this.show = (direction) => {\n            return new Promise(\n                (resolve) => {\n                    if (dom.hasClass('active')) {\n                        this.emit('shown')\n                        resolve()\n                    }\n\n                    this.emit('showing')\n\n                    if (direction) {\n                        dom.addClass('showing-' + direction)\n                    } else {\n                        dom.addClass('showing')\n                    }\n\n                    setTimeout(\n                        () => {\n                            if (direction) {\n                                dom.removeClass('showing-' + direction)\n                            } else {\n                                dom.removeClass('showing')\n                            }\n\n                            this.emit('shown')\n                            resolve()\n                        },\n                        333\n                    )\n                }\n            )\n        }\n\n        this.hide = (direction) => {\n            return new Promise(\n                (resolve) => {\n                    this.emit('hiding')\n\n                    if (direction) {\n                        dom.addClass('hiding-' + direction)\n                    } else {\n                        dom.addClass('hiding')\n                    }\n\n                    setTimeout(\n                        () => {\n                            if (direction) {\n                                dom.removeClass('hiding-' + direction)\n                            } else {\n                                dom.removeClass('hiding')\n                            }\n\n                            this.emit('hidden')\n                            resolve()\n                        },\n                        333\n                    )\n                }\n            )\n        }\n\n        this.on('showing',\n            () => {\n                dom.addClass('active')\n            }\n        )\n\n        this.on('hidden',\n            () => {\n                dom.removeClass('active')\n            }\n        )\n\n        this.on('shown',\n            () => {\n                dom.find(':input').first().focus()\n            }\n        )\n\n        this.on('validation',\n            (err) => {\n                if (typeof (err) === 'undefined') {\n                    dom.find(':input.is-invalid').removeClass('is-invalid')\n                    dom.find('.invalid-feedback').remove()\n                    return\n                }\n\n                const field = window.$(err.field)\n                const group = field.closest('.form-group')\n                let feedback = group.find('.invalid-feedback')\n\n                field.addClass('is-invalid')\n\n                if (!feedback.length) {\n                    feedback = window.$('<div>').addClass('invalid-feedback')\n                    feedback.appendTo(group)\n                }\n\n                feedback.text(err.message)\n                field.focus()\n            }\n        )\n\n        this.prev = () => {\n            this.hide('rw').then(\n                () => {\n                    this.emit('moving.prev')\n                    this.emit('prev')\n                }\n            )\n        }\n\n        this.next = () => {\n            submit()\n            this.emit('validation')\n\n            this.validate().then(\n                () => {\n                    this.emit('moving.next')\n                    this.hide('ff').then(\n                        () => {\n                            this.emit('next')\n                        }\n                    )\n                }\n            ).catch(\n                (err) => {\n                    this.emit('validation', err)\n                }\n            )\n        }\n\n        this.validate = () => {\n            return new Promise(\n                (resolve, reject) => {\n                    let rejected = false\n\n                    dom.find(':input').each(\n                        function() {\n                            if (rejected) {\n                                return false\n                            }\n\n                            const input = window.$(this)\n                            const value = input.val()\n                            const required = input.attr('required')\n\n                            if (required && !value.trim()) {\n                                rejected = true\n                                reject(\n                                    {\n                                        field: input,\n                                        message: 'This field is required.'\n                                    }\n                                )\n\n                                return false\n                            }\n                        }\n                    )\n\n                    if (!rejected) {\n                        resolve()\n                    }\n                }\n            )\n        }\n\n        const self = this\n\n        dom.on('click', '[data-action=\"prev\"]',\n            function() {\n                self.prev()\n            }\n        )\n\n        dom.on('click', '[data-action=\"next\"]',\n            function() {\n                self.next()\n            }\n        )\n\n        dom.on('keydown', ':input',\n            function(e) {\n                if (e.keyCode === 13) {\n                    self.next()\n                }\n            }\n        )\n    }\n}\n\nclass Wizard extends EventEmitter {\n    constructor(dom) {\n        super()\n\n        const self = this\n        let steps = []\n\n        dom.find('.step').each(\n            function() {\n                const step = new WizardStep(self, window.$(this))\n\n                steps.push(step)\n            }\n        )\n\n        steps.forEach(\n            (step, i) => {\n                if (i > 0) {\n                    step.on('moving.prev',\n                        () => {\n                            const prev = steps[i - 1]\n\n                            prev.show('rw')\n                        }\n                    )\n                }\n\n                if (i < steps.length) {\n                    step.on('moving.next',\n                        () => {\n                            const next = steps[i + 1]\n\n                            next.show('ff')\n                        }\n                    )\n                }\n            }\n        )\n\n        this.show = (stepIndex) => {\n            if (typeof (stepIndex) === 'undefined') {\n                stepIndex = 0\n            }\n\n            steps[stepIndex].show()\n        }\n    }\n}\n\nexport default class OnboardingWizardPlugin extends PluginBase {\n    ready() {\n        const $ = this.$\n\n        $('.onboarding.wizard').each(\n            function() {\n                const wizard = new Wizard($(this))\n\n                wizard.show()\n            }\n        )\n    }\n}\n","import App from './lib/classes/app'\nimport OnboardingWizardPlugin from './onboarding/wizard'\n\nwindow.Pico = new App(\n    {\n        plugins: [\n            OnboardingWizardPlugin\n        ]\n    }\n)\n"]}